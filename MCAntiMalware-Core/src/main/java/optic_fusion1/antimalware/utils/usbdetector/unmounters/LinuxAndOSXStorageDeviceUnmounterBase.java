package optic_fusion1.antimalware.utils.usbdetector.unmounters;

import java.io.IOException;
import static optic_fusion1.antimalware.AntiMalware.LOGGER;
import static optic_fusion1.antimalware.utils.I18n.tl;
import optic_fusion1.antimalware.utils.usbdetector.process.CommandExecutor;

public abstract class LinuxAndOSXStorageDeviceUnmounterBase extends AbstractStorageDeviceUnmounter {

  protected void unmount(String unmountCommand) {
    try (CommandExecutor commandExecutor = new CommandExecutor(unmountCommand)) {
      Thread.sleep(1000L);
      commandExecutor.processOutput(LOGGER::info);
      LOGGER.debug(tl("usb_detector_unmount_success", unmountCommand));
    } catch (IOException | InterruptedException e) {
      LOGGER.info(tl("usb_detector_unmount_fail", unmountCommand));
      LOGGER.exception(e);
    }
  }
}
