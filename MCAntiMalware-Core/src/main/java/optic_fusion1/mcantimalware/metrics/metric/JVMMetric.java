package optic_fusion1.mcantimalware.metrics.metric;

import java.lang.management.ManagementFactory;
import java.lang.management.OperatingSystemMXBean;
import java.lang.management.RuntimeMXBean;
import java.util.ArrayList;
import java.util.List;
import optic_fusion1.mcantimalware.Main;
import optic_fusion1.mcantimalware.metrics.measurement.JVMMeasurement;

public class JVMMetric implements Metric<JVMMeasurement> {

  @Override
  public List<JVMMeasurement> getMeasurements(Main main) {
    List<JVMMeasurement> list = new ArrayList<>();
    Runtime runtime = Runtime.getRuntime();
    RuntimeMXBean runtimeMXBean = ManagementFactory.getRuntimeMXBean();
    OperatingSystemMXBean osMXBean = ManagementFactory.getOperatingSystemMXBean();
    list.add(new JVMMeasurement(osMXBean.getSystemLoadAverage(), runtime.availableProcessors(),
            Thread.activeCount(), runtimeMXBean.getUptime()));
    return list;
  }

}
