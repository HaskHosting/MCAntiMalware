package optic_fusion1.mcantimalware.notification;

import java.nio.file.Path;
import optic_fusion1.mcantimalware.CommandLineParser;
import optic_fusion1.mcantimalware.check.CheckResult;
import optic_fusion1.mcantimalware.notification.impl.DiscordNotification;

public class NotificationHandler {

  private CommandLineParser commandLineParser;
  private NotificationSender notificationSender;

  public NotificationHandler(CommandLineParser commandLineParser) {
    this.commandLineParser = commandLineParser;
    if (commandLineParser.shouldNotifyWhenMalicious()) {
      if (commandLineParser.getNotificationType().equalsIgnoreCase("discord")) {
        notificationSender = new DiscordNotification();
      }
    }
  }

  public void sendNotification(Path path, CheckResult result) {
    if (notificationSender == null) {
      return;
    }
    notificationSender.notifyDetectedFile(path, result);
  }

}
