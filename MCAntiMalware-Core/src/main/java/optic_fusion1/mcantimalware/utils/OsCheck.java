package optic_fusion1.mcantimalware.utils;

import java.util.Locale;
import static optic_fusion1.mcantimalware.Main.LOGGER;
import static optic_fusion1.mcantimalware.utils.I18n.tl;

public class OsCheck {

  public enum OS {
    Windows, MacOS, Linux, Other;
  }

  protected static OS detectedOS;

  /**
   * detect the operating system from the os.name System property and cache the result
   *
   * @returns - the operating system detected
   */
  public static OS getOperatingSystemType() {
    if (detectedOS == null) {
      String os = System.getProperty("os.name", "generic").toLowerCase(Locale.ENGLISH);
      if ((os.contains("mac")) || (os.contains("darwin"))) {
        detectedOS = OS.MacOS;
      } else if (os.contains("win")) {
        detectedOS = OS.Windows;
      } else if (os.contains("nux")) {
        detectedOS = OS.Linux;
      } else {
        detectedOS = OS.Other;
        LOGGER.info(tl("usb_detector_unknown_os_found", os));
      }
    }
    return detectedOS;
  }

}
